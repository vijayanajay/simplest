# User Story 3.2: Backtesting Evolved Strategies

## Description
As a quantitative trader, I want to backtest the evolved trading strategies against historical data so that I can evaluate their performance using key metrics like Sharpe ratio and maximum drawdown.

## Requirements
- Use the backtest configuration from `config.yaml`, including initial capital, commission, and slippage settings.
- Each strategy from the GA output should be tested using the `BacktestMetrics` model, recording metrics such as total net profit, win rate, and average holding period.
- Integrate with cached market data from the `cached_market_data` table to simulate trades based on `StockDataPoint` and `Trade` models.
- Generate a list of trades for each strategy, capturing details like entry/exit timestamps and profit/loss.

## Acceptance Criteria
- Backtesting runs for each `TradingStrategy` and produces a `BacktestMetrics` object.
- Ensure strategies are validated against `TradingStrategy` rules before testing.
- Output includes detailed trade logs and metrics for review, compatible with reporting configurations.
- Handle edge cases like insufficient data or invalid trades by logging errors and skipping affected strategies.

## Technical Context
- Implement backtesting logic using libraries like Backtrader or Zipline, integrated with Pydantic for data validation.
- Calculate metrics from the `Trade` list and compare against KPIs from the PRD.
- Testing: Unit tests for individual trade simulations and integration tests to verify metric calculations against known datasets.